{"name":"Transmission-cli","tagline":"Transmission PHP client for detect profit torrents and automate weburg.net downloads","body":"# Transmission CLI [![Build Status](https://travis-ci.org/popstas/transmission-cli.svg?branch=master)](https://travis-ci.org/popstas/transmission-cli) [![Coverage Status](https://coveralls.io/repos/github/popstas/transmission-cli/badge.svg?branch=master)](https://coveralls.io/github/popstas/transmission-cli?branch=master) [![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/popstas/transmission-cli/badges/quality-score.png?b=master)](https://scrutinizer-ci.com/g/popstas/transmission-cli/?branch=master) \r\n\r\ntransmission-cli is console php application for automate torrent download/upload from weburg.net\r\n\r\nBlog post: http://blog.popstas.ru/blog/2016/01/17/torrent-transmission-client-for-weburg/\r\n\r\nBased on:\r\n\r\n- [symfony/console](http://symfony.com/doc/current/components/console/index.html),\r\n- [martial/transmission-api](https://github.com/MartialGeek/transmission-api),\r\n- [leominov/weburg-torrent-grabber](https://github.com/leominov/weburg-torrent-grabber).\r\n\r\n# Features\r\n- send metrics to InfluxDB, torrent monitoring trends with Grafana\r\n- download popular (rating, comment and votes based) movies from http://weburg.net\r\n- download tracked series from http://weburg.net\r\n- delete not popular uploads from transmission\r\n- working with multiple transmission instances\r\n- command line autocompletion\r\n\r\n## Graphics\r\n\r\n- hourly upload stats by torrent and summary upload\r\n- list all hosts that sends metrics to InfluxDB\r\n\r\n![Screenshot](docs/img/grafana.png?raw=true)\r\n\r\n\r\n# Available commands:\r\n- `help`                             - Displays help for a command\r\n- `list`                             - List commands\r\n- `torrent-list [--name='series*1080'] [--age='>1 <3 =2'] [--sort=1] [--limit=10]`, `tl` - List, filter and sort torrents\r\n- `torrent-add file|url [file2] [fileX]`, `ta` - Safe add torrents\r\n- `torrent-remove 1 [2] [3]`, `tr`    - Remove one or more torrents by torrent id\r\n- `torrent-remove-duplicates`, `trd` - Remove duplicates obsolete torrents\r\n- `stats-get [--name='name'] [--age='>1 <3 =2'] [profit='>0'] [--days=7] [--sort=1] [--limit=10] [--rm]`, `sg` - Get metrics from InfluxDB\r\n- `stats-send`, `ss`                 - Send metrics to InfluxDB\r\n- `weburg-download`, `wd`            - Download popular torrents and tracked series from weburg.net\r\n- `weburg-download --popular`        - Download only popular\r\n- `weburg-download --series`         - Download only series\r\n- `weburg-download [movie url or id]` - Download movie without popularity check\r\n- `weburg-download [series url or id] [--days=1]` - Download series for last x days\r\n- `weburg-series-add`, `wsa`         - Add series to monitoring list\r\n\r\n#### Global command options\r\n- `--config` - set path to config file\r\n- `--dry-run` - don't change any data\r\n- `-v|vv|vvv` - more verbose output\r\n- `--transmission-host` - set transmission host\r\n- `--transmission-port` - set transmission port\r\n- `--transmission-user` - set transmission user\r\n- `--transmission-password` - set transmission password\r\n\r\n\r\n# Install\r\n\r\n### PHAR automatic (Recommended)\r\n```\r\nlatest_phar=$(curl -s https://api.github.com/repos/popstas/transmission-cli/releases/latest | grep 'browser_' | cut -d\\\" -f4)\r\nwget -O /usr/local/bin/transmission-cli \"$latest_phar\"\r\nchmod +x /usr/local/bin/transmission-cli\r\n```\r\n\r\n### PHAR manually\r\nDownload latest transmission-cli.phar [here](https://github.com/popstas/transmission-cli/releases/latest), make it executable and put it to bin directory.\r\n\r\n### Composer global\r\n```\r\ncomposer global require popstas/transmission-cli\r\n```\r\nIf you cannot execute `transmission-cli` after that, probably you should add ~/.composer/vendor/bin to your PATH environment variable\r\nas described [here](https://akrabat.com/global-installation-of-php-tools-with-composer/).\r\n \r\n\r\n### Composer from source:\r\n```\r\ngit clone https://github.com/popstas/transmission-cli\r\ncd transmission-cli\r\ncomposer install\r\nln -s \"$PWD\"/bin/transmission-cli /usr/local/bin/transmission-cli\r\n```\r\n\r\n# Configure\r\nDefault config placement: `~/.transmission-cli.yml`. It creates on first `weburg-series-add` command.\r\nYou can change some parameters here.\r\n\r\nAlso, you can pass config to command: `transmission-cli --config /path/to/config.yml`\r\n\r\nCommands `weburg-download`, `weburg-series-add`, interacts only with weburg.net and not requests to Transmission or InfluxDb.\r\n\r\n\r\n#### Transmission\r\nIf you want to make commands `torrent-*` working, you should enable remote access in Transmission\r\nand add host, port, username, password if it not defaults.\r\n\r\nBy default, transmission-cli request to Transmission on localhost:9091 without user and password. You can change it in `~/.transmission-cli.yml`.\r\n\r\nYou can override default config: `--transmission-host`, `--transmission-port`, `--transmission-user`, `--transmission-password`\r\n\r\nAlso, maybe you want to automatically download movies, not only torrent files. To do that, enable autodownload in Transmission\r\nand point to same directory in `--dest=` option.\r\n\r\n\r\n#### InfluxDB and Grafana\r\nYou need to install it for drawing torrent graphics.\r\n\r\n**InfluxDB**\r\n\r\nSimplest way to install InfluxDB - Docker:\r\n```\r\ndocker run --name influxdb\\\r\n    -d --volume=/Users/popstas/lib/influxdb:/data \\\r\n    -p 8083:8083 -p 8086:8086 \\\r\n    tutum/influxdb\r\n```\r\nAnd if you don't want to see detailed stats about your torrents, you may not install InfluxDB, commands `stat-*` will not working.\r\n\r\n\r\n**Grafana**\r\n\r\nAdd InfluxDB as data source to Grafana.\r\nThen import dashboard - [grafana-torrents.json](docs/grafana-torrents.json)\r\nIf you don't want to see graphs, Grafana not necessary.\r\n\r\n#### [autocompletion](https://github.com/stecman/symfony-console-completion) for bash/zsh:\r\n```\r\nsource <(transmission-cli _completion --generate-hook)\r\n```\r\n\r\n\r\n#### Cron\r\nThen, add to cron tasks like this:\r\n```\r\nPATH=\"$PATH:/usr/local/bin\"\r\n59 * * * * transmission-cli torrent-remove-duplicates --transmission-host=localhost\r\n59 * * * * transmission-cli torrent-remove-duplicates --transmission-host=wrtnsq\r\n0  * * * * transmission-cli stats-send --transmission-host=localhost\r\n0  * * * * transmission-cli stats-send --transmission-host=wrtnsq\r\n1  2 * * * transmission-cli weburg-download --download-torrents-dir=/Volumes/media/_planeta/_torrents\r\n```\r\nDon't forget add to cron PATH your ~/.composer/vendor/bin if you installed transmission-cli with `composer global`!\r\n\r\n# Usage\r\n\r\nSee [commands `--help`](docs/commands.md).\r\n\r\n\r\n# Contribution\r\n\r\n### Required checks for pass build:\r\n```\r\n./vendor/bin/phpcs --standard=psr2 ./src ./tests\r\nphpunit\r\n```\r\n\r\n### Chore\r\n- generate CHANGELOG.md\r\n```\r\nconventional-changelog -p angular -i CHANGELOG.md -s \r\n```\r\n- generate command docs\r\n```\r\nbin/transmission-cli _docs > docs/commands.md\r\n```\r\n\r\n### Recommended\r\n- support code full coverage\r\n- check code with PHP Mess Detector:hich \r\n```\r\nphpmd src/ text codesize,controversial,design,naming,unusedcode\r\n```\r\n","google":"UA-70438594-2","note":"Don't delete this file! It's used internally to help with page regeneration."}